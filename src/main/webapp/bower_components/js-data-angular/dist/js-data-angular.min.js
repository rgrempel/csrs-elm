/*!
* js-data-angular
* @version 2.4.0 - Homepage <https://www.js-data.io/docs/js-data-angular/>
* @author Jason Dobry <jason.dobry@gmail.com>
* @copyright (c) 2014-2015 Jason Dobry <https://github.com/jmdobry/>
* @license MIT <https://github.com/js-data/js-data-angular/blob/master/LICENSE>
*
* @overview Angular wrapper for js-data.
*/

!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(function(){try{return require("js-data")}catch(a){}}(),function(){try{return require("angular")}catch(a){}}()):"function"==typeof define&&define.amd?define(["js-data","angular"],b):"object"==typeof exports?exports.jsDataAngularModuleName=b(function(){try{return require("js-data")}catch(a){}}(),function(){try{return require("angular")}catch(a){}}()):a.jsDataAngularModuleName=b(a.JSData,a.angular)}(this,function(a,b){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(a){var b=void 0;try{b=c(3)(a.project)}catch(d){}b||(b=window[a["class"]]),b&&("http"===a.name&&(r=!0),a.loaded=!0,g.module("js-data").provider(a["class"],function(){var a=this;a.defaults={},a.$get=[function(){return new b(a.defaults)}]}))}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(b,"__esModule",{value:!0});var g=void 0,h=void 0;try{h=c(1)}catch(i){}if(!h)try{h=window.JSData}catch(i){}if(!h)throw new Error("js-data must be loaded!");try{g=c(2)}catch(i){}if(!g)try{g=window.angular}catch(i){}if(!g)throw new Error("angular must be loaded!");var j=h.DSUtils,k=h.DSErrors,l=j.deepMixIn,m=j.copy,n=j.removeCircular,o=j.isString,p=j.isNumber,q=j.makePath,r=!1,s=[{project:"js-data-http",name:"http","class":"DSHttpAdapter"},{project:"js-data-localstorage",name:"localstorage","class":"DSLocalStorageAdapter"},{project:"js-data-localforage",name:"localforage","class":"DSLocalForageAdapter"},{project:"js-data-firebase",name:"firebase","class":"DSFirebaseAdapter"},{project:"js-data-sql",name:"sql","class":"DSSqlAdapter"}],t=["compute","digest","eject","inject","link","linkAll","linkInverse","unlinkInverse"],u=function w(){function a(){function a(a){var b=i.defer();try{a.call(void 0,g.bind(b,b.resolve),g.bind(b,b.reject))}catch(c){b.reject(c)}return b.promise}for(var c=arguments.length,d=Array(c),e=0;c>e;e++)d[e]=arguments[e];var f=d[d.length-2],i=d[d.length-1],k=new h.DS(b.defaults),l={};if(a.all=i.all,a.when=i.when,a.reject=i.reject,j.Promise=a,d.length)for(var m=0;m<d.length;m++)for(var n=0;n<s.length;n++)if(s[n].loaded&&!s[n].registered){s[n].registered=!0,k.registerAdapter(s[n].name,d[m]);break}for(var o=function(){var a=t[p];l[a]=k[a],k[a]=function(){for(var b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];return f.$$phase?l[a].apply(k,c):f.$apply(function(){return l[a].apply(k,c)})}},p=0;p<t.length;p++)o();return("function"!=typeof Object.observe||"function"!=typeof Array.observe)&&f.$watch(function(){return k.observe.Platform.performMicrotaskCheckpoint()}),k}f(this,w);for(var b=this,c=[],d=0;d<s.length;d++)s[d].loaded&&c.push(s[d]["class"]);b.defaults={},h.DS.prototype.bindAll=function(a,b,c,d,e){var f=this;if(b=b||{},!f.definitions[a])throw new k.NER(a);if(!j.isObject(b))throw new k.IA('"params" must be an object!');if(!j.isObject(c))throw new k.IA('"scope" must be an object!');if(!j.isString(d))throw new k.IA('"expr" must be a string!');try{return c.$watch(function(){return f.lastModified(a)},function(){var g=f.filter(a,b);j.set(c,d,g),e&&e(null,g)})}catch(g){if(!e)throw g;e(g)}},h.DS.prototype.bindOne=function(a,b,c,d,e){var f=this;if(b=j.resolveId(f.definitions[a],b),!f.definitions[a])throw new k.NER(a);if(!j.isString(b)&&!j.isNumber(b))throw new k.IA('"id" must be a string or a number!');if(!j.isObject(c))throw new k.IA('"scope" must be an object!');if(!j.isString(d))throw new k.IA('"expr" must be a string!');try{return c.$watch(function(){return f.lastModified(a,b)},function(){var g=f.get(a,b);g&&f.compute(a,b),j.set(c,d,g),e&&e(null,g)})}catch(g){if(!e)throw g;e(g)}},c.push("$rootScope"),c.push("$q"),c.push(a),b.$get=c};g.module("js-data",["ng"]).value("DSUtils",h.DSUtils).value("DSErrors",h.DSErrors).provider("DS",u);for(var v=0;v<s.length;v++)d(s[v]);r||!function(){var a=function(){function a(){f(this,a)}return e(a,[{key:"queryTransform",value:function(a,b){return b}},{key:"deserialize",value:function(a,b){return b&&"data"in b?b.data:b}},{key:"serialize",value:function(a,b){return b}},{key:"log",value:function(){}},{key:"error",value:function(){}}]),a}(),b=a.prototype;b.basePath="",b.forceTrailingSlash="",b.httpConfig={};var c=function(){function b(c){f(this,b),this.defaults=new a,console&&(this.defaults.log=function(a,b){return console["function"==typeof console.info?"info":"log"](a,b)}),console&&(this.defaults.error=function(a,b){return console["function"==typeof console.error?"error":"log"](a,b)}),l(this.defaults,c)}return e(b,[{key:"getPath",value:function(a,b,c,d){var e=this;d=d||{};var f=[d.basePath||e.defaults.basePath||b.basePath,b.getEndpoint(o(c)||p(c)||"create"===a?c:null,d)];return("find"===a||"update"===a||"destroy"===a)&&f.push(c),q.apply(j,f)}},{key:"GET",value:function(a,b){return b=b||{},"method"in b||(b.method="get"),this.HTTP(l(b,{url:a}))}},{key:"POST",value:function(a,b,c){return c=c||{},c=j.copy(c),"method"in c||(c.method="post"),this.HTTP(l(c,{url:a,data:b}))}},{key:"PUT",value:function(a,b,c){return c=c||{},"method"in c||(c.method="put"),this.HTTP(l(c,{url:a,data:b||{}}))}},{key:"DEL",value:function(a,b){return b=b||{},"method"in b||(b.method="delete"),this.HTTP(l(b,{url:a}))}},{key:"find",value:function(a,b,c){var d=this;return c=c?m(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},c.params=d.defaults.queryTransform(a,c.params),d.GET(d.getPath("find",a,b,c),c).then(function(b){var e=(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b);return e?e:h.DSUtils.Promise.reject(new Error("Not Found!"))})}},{key:"findAll",value:function(a,b,c){var d=this;return c=c?m(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},b&&(b=d.defaults.queryTransform(a,b),l(c.params,b)),d.GET(d.getPath("findAll",a,b,c),c).then(function(b){return(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b)})}},{key:"create",value:function(a,b,c){var d=this;return c=c?m(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},c.params=d.defaults.queryTransform(a,c.params),d.POST(d.getPath("create",a,b,c),(c.serialize?c.serialize:d.defaults.serialize)(a,b),c).then(function(b){return(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b)})}},{key:"update",value:function(a,b,c,d){var e=this;return d=d?m(d):{},d.suffix=d.suffix||a.suffix,d.params=d.params||{},d.params=e.defaults.queryTransform(a,d.params),e.PUT(e.getPath("update",a,b,d),(d.serialize?d.serialize:e.defaults.serialize)(a,c),d).then(function(b){return(d.deserialize?d.deserialize:e.defaults.deserialize)(a,b)})}},{key:"updateAll",value:function(a,b,c,d){var e=this;return d=d?m(d):{},d.suffix=d.suffix||a.suffix,d.params=d.params||{},c&&(c=e.defaults.queryTransform(a,c),l(d.params,c)),this.PUT(e.getPath("updateAll",a,b,d),(d.serialize?d.serialize:e.defaults.serialize)(a,b),d).then(function(b){return(d.deserialize?d.deserialize:e.defaults.deserialize)(a,b)})}},{key:"destroy",value:function(a,b,c){var d=this;return c=c?m(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},c.params=d.defaults.queryTransform(a,c.params),d.DEL(d.getPath("destroy",a,b,c),c).then(function(b){return(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b)})}},{key:"destroyAll",value:function(a,b,c){var d=this;return c=c?m(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},b&&(b=d.defaults.queryTransform(a,b),l(c.params,b)),this.DEL(d.getPath("destroyAll",a,b,c),c).then(function(b){return(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b)})}}]),b}(),d=c.prototype,i=function k(){f(this,k);var a=this;a.defaults={},a.$get=["$http","DS","$q",function(b,e,f){d.HTTP=function(a){function c(a){var b=""+e.toUTCString()+" - "+a.config.method.toUpperCase()+" "+a.config.url+" - "+a.status+" "+((new Date).getTime()-e.getTime())+"ms";return a.status>=200&&a.status<300?(d.defaults.log&&d.defaults.log(b,a),a):(d.defaults.error&&d.defaults.error("FAILED: "+b,a),f.reject(a))}var d=this,e=new Date;a=m(a),a=l(a,d.defaults.httpConfig),d.defaults.forceTrailingSlash&&"/"!==a.url[a.url.length-1]&&(a.url+="/"),a.method=a.method.toUpperCase(),"object"==typeof a.data&&(a.data=n(a.data));var g=a.suffix||d.defaults.suffix;return g&&a.url.substr(a.url.length-g.length)!==g&&(a.url+=g),b(a).then(c,c)};var g=new c(a.defaults);return e.registerAdapter("http",g,{"default":!0}),g}]};g.module("js-data").provider("DSHttpAdapter",i)}(),g.module("js-data").run(["DS","DSHttpAdapter",function(a,b){return a.registerAdapter("http",b,{"default":!0})}]),b["default"]="js-data",a.exports=b["default"]},function(b,c,d){if("undefined"==typeof a){var e=new Error('Cannot find module "undefined"');throw e.code="MODULE_NOT_FOUND",e}b.exports=a},function(a,c,d){if("undefined"==typeof b){var e=new Error('Cannot find module "angular"');throw e.code="MODULE_NOT_FOUND",e}a.exports=b},function(a,b,c){function d(a){return c(e(a))}function e(a){return f[a]||function(){throw new Error("Cannot find module '"+a+"'.")}()}var f={};d.keys=function(){return Object.keys(f)},d.resolve=e,a.exports=d,d.id=3}])});
//# sourceMappingURL=js-data-angular.min.map