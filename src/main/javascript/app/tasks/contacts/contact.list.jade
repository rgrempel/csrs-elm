.contact-list
    h3(translate = "membership.byYear.title") Membership by Year 

    .row
        div(class = "col-xs-12 col-sm-12 col-md-9 col-lg-8")
            table(class = "table table-striped table-bordered")
                tr
                    th(translate = "csrsApp.annual.year") Year
                    th(
                        ng-repeat = "membership in contactList.membershipTypes"
                        translate = "csrsApp.annual.data.membership.{{membership}}"
                    )
                    th(translate = "global.total") Total

                tr(
                    ng-repeat = "year in contactList.years" 
                )
                    td.year(
                        ng-bind = "year.year"
                        ng-click = "contactList.cycleYearRequired(year.year)"
                        ng-class = [
                            "{",
                                "'success': contactList.isYearRequired(year.year),",
                                "'danger':  contactList.isYearForbidden(year.year)",
                            "}"
                        ].join("")
                    )
                    td.membership-count(
                        ng-click = "contactList.cycleRequired(year.year, membership)"
                        ng-class = [
                            "{",
                                "'success': contactList.isRequired(year.year, membership),",
                                "'danger':  contactList.isForbidden(year.year, membership)",
                            "}"
                        ].join("")
                        ng-repeat = "membership in contactList.membershipTypes"
                        ng-bind = "year.memberships[membership].count"
                    )
                    td(ng-bind = "year.total")


        div(class = "col-xs-12 col-sm-12 col-md-3 col-lg-4")
            .instructions
                p(translate = "membership.byYear.instructions.1")
                    | To limit the list to people who were members in a particular
                    | year, click on the year so that its background is green.
                    | Multiple selections mean that the person must have been a
                    | member in each selected year.

                p(translate = "membership.byYear.instructions.2")
                    | To exclude people who were members in a particular year,
                    | click on the year again so that its background is red.

                p(translate = "membership.byYear.instructions.3")
                    | So, to find out who is a new member, click on the current
                    | year to make it green, and click on some number of previous
                    | years to make them red.

                p(translate = "membership.byYear.instructions.4")
                    | Or, to find out who has not renewed, click on the current
                    | year to make it red, and click on some number of previous
                    | years to make them green.

                p(translate = "membership.byYear.instructions.5")
                    | To merge a PDF template with all of the displayed contacts,
                    | select one below.

            .templates
                form.form-inline
                    select.form-control(
                        ng-options="template.code for template in contactList.templates track by template.id"
                        ng-model="contactList.selectedTemplate"
                    )

                    button(
                        type="button"
                        class="btn btn-default dropdown-toggle"
                        data-toggle="dropdown"
                        aria-expanded="false"
                        ng-disabled="!contactList.selectedTemplate"
                    ) 
                        span(translate = "entity.action.action") Action
                        | &nbsp;
                        span.caret

                    ul.dropdown-menu(role="menu")
                        li
                            a(
                                ng-href="{{contactList.getMergeURL()}}"
                                translate="entity.action.merge"
                                target="_self"
                            ) Merge
                        
                        li
                            a(
                                href="#"
                                ui-sref="template-detail({id: contactList.selectedTemplate.id})"
                                translate="entity.action.edit"
                            ) Edit

                    p

                    button(
                        type = "button"
                        class = "btn btn-default"
                    )
                        a(
                            ng-href = "{{contactList.getExportURL()}}"
                            translate = "membership.byYear.exportToXLS"
                        ) Export XLS
            
    p(
        translate = "membership.byYear.showingMembers"
        translate-values = "{number: '{{contactList.filtered.length}}'}"
    )

    .multi-list
        div(ng-repeat = "contact in contactList.filtered track by contact.id")
            a(
                ui-sref = "processFormsDetail({id: contact.id})"
            )
                span(ng-bind="::contact.firstName")
                | &nbsp;
                span(ng-bind="::contact.lastName")
